<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hooke's Law: Stress-Strain Simulator</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 600px; }
        canvas { border: 1px solid #ccc; background: #fff; margin-top: 20px; }
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        label { font-size: 14px; font-weight: bold; }
        input[type="range"] { width: 100%; }
        .stats { margin-top: 10px; font-family: monospace; background: #eee; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Stress-Strain Interactive Element</h2>
    
    <div class="controls">
        <div>
            <label>Mode:</label><br>
            <select id="mode" onchange="update()">
                <option value="uniaxial">Uniaxial (σx only)</option>
                <option value="biaxial">General Biaxial (σx ≠ σy)</option>
                <option value="equibiaxial">Equibiaxial (σx = σy)</option>
            </select>
        </div>
        <div>
            <label>Poisson's Ratio (ν): <span id="vVal">0.3</span></label>
            <input type="range" id="poisson" min="0" max="0.49" step="0.01" value="0.3" oninput="update()">
        </div>
        <div>
            <label>Stress σx: <span id="sxVal">50</span></label>
            <input type="range" id="stressX" min="0" max="100" value="50" oninput="update()">
        </div>
        <div>
            <label id="syLabel">Stress σy: <span id="syVal">0</span></label>
            <input type="range" id="stressY" min="0" max="100" value="0" oninput="update()">
        </div>
    </div>

    <canvas id="canvas" width="560" height="300"></canvas>

    <div class="stats" id="output">
        εx: 0.000 | εy: 0.000
    </div>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

function update() {
    const mode = document.getElementById('mode').value;
    const nu = parseFloat(document.getElementById('poisson').value);
    let sx = parseFloat(document.getElementById('stressX').value);
    let sy = parseFloat(document.getElementById('stressY').value);
    
    // UI Logic for different modes
    if (mode === 'uniaxial') {
        sy = 0;
        document.getElementById('stressY').disabled = true;
    } else if (mode === 'equibiaxial') {
        sy = sx;
        document.getElementById('stressY').value = sx;
        document.getElementById('stressY').disabled = true;
    } else {
        document.getElementById('stressY').disabled = false;
    }

    document.getElementById('vVal').innerText = nu;
    document.getElementById('sxVal').innerText = sx;
    document.getElementById('syVal').innerText = sy;

    // Calculate Strains (Simplified Hooke's Law, E assumed constant)
    const ex = (sx - nu * sy) / 100;
    const ey = (sy - nu * sx) / 100;

    draw(ex, ey, sx, sy);
    document.getElementById('output').innerText = `εx: ${ex.toFixed(3)} | εy: ${ey.toFixed(3)}`;
}

function draw(ex, ey, sx, sy) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const size = 100;

    // 1. Draw Original Undeformed Element (Dashed)
    ctx.setLineDash([5, 5]);
    ctx.strokeStyle = '#999';
    ctx.strokeRect(centerX - size/2, centerY - size/2, size, size);

    // 2. Draw Deformed Element (Solid)
    ctx.setLineDash([]);
    ctx.strokeStyle = '#000';
    ctx.lineWidth = 2;
    const defW = size * (1 + ex);
    const defH = size * (1 + ey);
    ctx.strokeRect(centerX - defW/2, centerY - defH/2, defW, defH);

    // 3. Draw Stress Arrows
    ctx.fillStyle = "red";
    ctx.strokeStyle = "red";
    drawArrow(centerX + defW/2, centerY, centerX + defW/2 + sx/2, centerY); // Right
    drawArrow(centerX - defW/2, centerY, centerX - defW/2 - sx/2, centerY); // Left
    drawArrow(centerX, centerY - defH/2, centerX, centerY - defH/2 - sy/2); // Top
    drawArrow(centerX, centerY + defH/2, centerX, centerY + defH/2 + sy/2); // Bottom
}

function drawArrow(x1, y1, x2, y2) {
    const headlen = 10;
    const angle = Math.atan2(y2 - y1, x2 - x1);
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.lineTo(x2 - headlen * Math.cos(angle - Math.PI / 6), y2 - headlen * Math.sin(angle - Math.PI / 6));
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - headlen * Math.cos(angle + Math.PI / 6), y2 - headlen * Math.sin(angle + Math.PI / 6));
    ctx.stroke();
}

update();
</script>
</body>
</html>